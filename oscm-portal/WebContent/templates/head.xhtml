<!-- Copyright FUJITSU LIMITED 2017-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:rich="http://richfaces.org/rich" xmlns:c="http://java.sun.com/jsp/jstl/core"
  xmlns:a4j="http://richfaces.org/a4j">

  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>#{msg['title']}</title>
  <link rel="stylesheet" type="text/css"
    href="#{facesContext.externalContext.requestContextPath}/public/css.jsf?oId=#{oId}&amp;sId=#{sId}&amp;subscriptionKey=#{subscriptionKey}&amp;" />
  <link rel="stylesheet" type="text/css"
    href="#{facesContext.externalContext.requestContextPath}/css/tagCloud.css" />
  <link rel="stylesheet" type="text/css"
    href="#{facesContext.externalContext.requestContextPath}/css/passwordStrength.css" />
  <link rel="icon" href="#{appBean.brandingURL}/img/favicon.ico" type="image/x-icon" />
  <script src="#{facesContext.externalContext.requestContextPath}/scripts/admUtils.js" type="text/javascript"></script>

  <h:outputScript target="body">
    var onSubmitFlag = false;
    var onlyPMTypeDirty = false;
    function getUnloadMessage() { return "#{appBean.getJSMessageByKey('confirm.unsavedChanges.lost')}"; }
    function getIe7UploadValidationMessage() { return "#{appBean.getJSMessageByKey('error.upload.filename')}"; }
    function setDirty(flag) {onlyPMTypeDirty = false; if ((onSubmitFlag &amp;&amp; (!flag)) || (!onSubmitFlag)) { window.onbeforeunload = (flag) ? getUnloadMessage : null; } }
    function setOnlyPMTypeDirty() {setDirty(true);onlyPMTypeDirty = true;}
    function getDirty() { return null != window.onbeforeunload; }
    function isOnlyPMTypeDirty() {return onlyPMTypeDirty}
    function setOnSubmit(flag) { onSubmitFlag = flag; }
    AdmUtils.preventDefaultSubmitOnEnter();
    AdmUtils.setFocusBackgroundColor('#{skinBean.properties.focusBackgroundColor}');

    jQuery().ready(function(){
        AdmUtils.setFrameHeight();
        window.onresize = AdmUtils.setFrameHeight;
    })
    
    <c:if test="#{(not empty firstErrorElement or facesContext.maximumSeverity.ordinal > 0) and (empty dirty or dirty == 'true')}">
    setDirty(true);
    </c:if>
  </h:outputScript>
</ui:composition>

