<!-- Copyright FUJITSU LIMITED 2017-->
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:c="http://java.sun.com/jstl/core"
                xmlns:a4j="http://richfaces.org/a4j">
    <h:head>
        <ui:include src="../templates/head.xhtml" />
    </h:head>

    <h:body>
        <a4j:outputPanel id="saml2PostFormPanel">
            <form method="post" id="saml2Form" action="#{saml2Model.acsUrl}">
                <input type="hidden" name="SAMLRequest" value="#{saml2Model.encodedAuthnRequest}" />
                <input type="hidden" name="RelayState" value="#{saml2Model.relayState}" />
            </form>
        </a4j:outputPanel>

        <h:form id="jsfForm">
            <a4j:jsFunction name="jsSubmitRedirectFunction" action="#{saml2Ctrl.initModelAndCheckForErrors}"
                            render="saml2PostFormPanel" oncomplete="document.getElementById('saml2Form').submit()" />
        </h:form>

        <script type="text/javascript">
        jsSubmitRedirectFunction();
    </script>
    </h:body>
</ui:composition>